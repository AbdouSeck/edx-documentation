

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>8.7. Custom JavaScript Problem &mdash; Building and Running an edX Course  documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../',
        VERSION:'',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="Building and Running an edX Course  documentation" href="../index.html"/>
        <link rel="up" title="8. Creating Exercises and Tools" href="index.html"/>
        <link rel="next" title="8.8. Drag and Drop Problem" href="drag_and_drop.html"/>
        <link rel="prev" title="8.6. Conditional Module" href="conditional_module.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> Building and Running an edX Course</a>
        <form class="wy-form" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../read_me.html">1. Read Me</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preface.html">2. Preface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#system-status">2.1. System Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#resources-for-course-teams">2.2. Resources for Course Teams</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#resources-for-researchers">2.3. Resources for Researchers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#resources-for-developers">2.4. Resources for Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#resources-for-students">2.5. Resources for Students</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../change_log.html">3. Change Log</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../change_log.html#october-2014">3.1. October, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../change_log.html#september-2014">3.2. September, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../change_log.html#august-2014">3.3. August, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../change_log.html#july-2014">3.4. July, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../change_log.html#june-2014">3.5. June, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../change_log.html#may-2014">3.6. May, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../change_log.html#april-2014">3.7. April, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../change_log.html#march-2014">3.8. March, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../change_log.html#february-2014">3.9. February, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../change_log.html#january-2014">3.10. January, 2014</a></li>
<li class="toctree-l2"><a class="reference internal" href="../change_log.html#december-2013">3.11. December, 2013</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">4. Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/browsers.html">4.1. edX Browser Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/accounts.html">4.2. Getting Started with edX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/get_started.html">4.3. Getting Started with Studio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/accessibility.html">4.4. Guidelines for Creating Accessible Content</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/glossary.html">4.5. Glossary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../building_course/index.html">5. Setting up Your Course</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../building_course/creating_new_course.html">5.1. Creating a New Course</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building_course/export_import_course.html">5.2. Exporting and Importing a Course</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building_course/course_files.html">5.3. Adding Files to a Course</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building_course/handouts_updates.html">5.4. Adding Course Updates and Handouts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building_course/pages.html">5.5. Adding Pages to a Course</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building_course/textbooks.html">5.6. Adding Textbooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building_course/establish_grading_policy.html">5.7. Establishing a Grading Policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../building_course/setting_up_student_view.html">5.8. Setting up the Student View</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developing_course/index.html">6. Developing Your Course</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../developing_course/workflow.html">6.1. Getting Started with Course Content Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing_course/course_outline.html">6.2. Developing Your Course Outline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing_course/course_sections.html">6.3. Developing Course Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing_course/course_subsections.html">6.4. Developing Course Subsections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing_course/course_units.html">6.5. Developing Course Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing_course/course_components.html">6.6. Developing Course Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing_course/controlling_content_visibility.html">6.7. Controlling Content Visibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing_course/testing_courseware.html">6.8. Testing Your Course Content</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../creating_content/index.html">7. Creating Course Content</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../creating_content/create_html_component.html">7.1. Working with HTML Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../creating_content/create_video.html">7.2. Working with Video Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../creating_content/create_discussion.html">7.3. Working with Discussion Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../creating_content/create_problem.html">7.4. Working with Problem Components</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">8. Creating Exercises and Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="create_exercises_and_tools.html">8.1. Creating Exercises and Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotation.html">8.2. Annotation Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="checkbox.html">8.3. Checkbox Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="chemical_equation.html">8.4. Chemical Equation Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="circuit_schematic_builder.html">8.5. Circuit Schematic Builder Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="conditional_module.html">8.6. Conditional Module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">8.7. Custom JavaScript Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="drag_and_drop.html">8.8. Drag and Drop Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="dropdown.html">8.9. Dropdown Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="external_graders.html">8.10. External Grader</a></li>
<li class="toctree-l2"><a class="reference internal" href="full_screen_image.html">8.11. Full Screen Image Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="gene_explorer.html">8.12. Gene Explorer Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="google_hangouts.html">8.13. Google Instant Hangout Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="iframe.html">8.14. IFrame Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="image_mapped_input.html">8.15. Image Mapped Input Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="lti_component.html">8.16. LTI Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="math_expression_input.html">8.17. Math Expression Input Problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="molecule_editor.html">8.18. Molecule Editor Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="molecule_viewer.html">8.19. Molecule Viewer Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiple_choice.html">8.20. Multiple Choice Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="mult_choice_num_input.html">8.21. Multiple Choice and Numerical Input Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="numerical_input.html">8.22. Numerical Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="open_response_assessment.html">8.23. Open Response Assessment Problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="periodic_table.html">8.24. Periodic Table Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="poll.html">8.25. Poll Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="problem_with_hint.html">8.26. Problem with Adaptive Hint</a></li>
<li class="toctree-l2"><a class="reference internal" href="problem_in_latex.html">8.27. Problem Written in LaTeX</a></li>
<li class="toctree-l2"><a class="reference internal" href="protein_builder.html">8.28. Protex Protein Builder Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="text_input.html">8.29. Text Input Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="word_cloud.html">8.30. Word Cloud Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom_python.html">8.31. Write-Your-Own-Grader Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="zooming_image.html">8.32. Zooming Image Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="mathjax.html">8.33. A Brief Introduction to MathJax in Studio</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../content_experiments/index.html">9. Creating Content Experiments</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../content_experiments/content_experiments_overview.html">9.1. Overview of Content Experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../content_experiments/content_experiments_configure.html">9.2. Configure Your Course for Content Experiments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../content_experiments/content_experiments_add.html">9.3. Add Content Experiments to Your Course</a></li>
<li class="toctree-l2"><a class="reference internal" href="../content_experiments/content_experiments_view.html">9.4. Test Content Experiments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cohorts/index.html">10. Including Student Cohorts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cohorts/cohorts_overview.html">10.1. Using Cohorts to Build Course Communities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cohorts/cohort_config.html">10.2. Enabling and Configuring the Cohort Feature</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cohorts/cohorts_discussions.html">10.3. Managing Discussions in a Course with Student Cohorts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../releasing_course/index.html">11. Releasing Your Course</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../releasing_course/beta_testing.html">11.1. Beta Testing a Course</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releasing_course/course_launching.html">11.2. Course Launching Activities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releasing_course/staff_debug_info.html">11.3. Staff Debug Info</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../running_course/index.html">12. Running Your Course</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../running_course/course_staffing.html">12.1. Staffing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running_course/course_enrollment.html">12.2. Enrollment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running_course/discussions.html">12.3. Managing Course Discussions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running_course/discussions_students.html">12.4. Participating in Course Discussions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running_course/discussion_guidance_moderators.html">12.5. Guidance for Discussion Moderators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running_course/course_data.html">12.6. Course Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running_course/course_student.html">12.7. Student Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running_course/course_answers.html">12.8. Answer Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running_course/course_grades.html">12.9. Student Grades and Grading</a></li>
<li class="toctree-l2"><a class="reference internal" href="../running_course/checking_student_progress.html">12.10. Assign Final Grades and Issue Certificates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../students/index.html">13. Information for Your Students</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../students/login_guide.html">13.1. Sample Student Login Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../students/math_students.html">13.2. Math Response Formatting for Students</a></li>
<li class="toctree-l2"><a class="reference internal" href="../students/ora_students.html">13.3. Open Response Assessments for Students</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="/">Building and Running an edX Course</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="../index.html">Docs</a> &raquo;</li>
  <li><a href="">8.7. Custom JavaScript Problem</a></li>
  
</ul>
<hr/>

          
  <div class="section" id="custom-javascript-problem">
<span id="custom-javascript"></span><h1>8.7. Custom JavaScript Problem<a class="headerlink" href="#custom-javascript-problem" title="Permalink to this headline">¶</a></h1>
<p>Custom JavaScript display and grading problems (also called <em>custom JavaScript problems</em>
or <em>JS Input problems</em>) allow you to create a custom problem or tool that uses JavaScript
and then add the problem or tool directly into Studio. When you create a JS Input problem,
Studio embeds the problem in an inline frame (IFrame) so that your students can interact with
it in the LMS. You can grade your students’ work using JavaScript and some basic Python, and
the grading is integrated into the edX grading system.</p>
<p>The JS Input problem that you create must use HTML, JavaScript, and cascading style sheets
(CSS). You can use any application creation tool, such as the Google Web Toolkit (GWT), to
create your JS Input problem.</p>
<img alt="Image of a JavaScript Input problem" src="../_images/JavaScriptInputExample.png" />
<div class="section" id="create-a-custom-javascript-display-and-grading-problem">
<h2>8.7.1. Create a Custom JavaScript Display and Grading Problem<a class="headerlink" href="#create-a-custom-javascript-display-and-grading-problem" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Create your JavaScript application, and then upload all files associated with
that application to the <strong>Files &amp; Uploads</strong> page.</p>
</li>
<li><p class="first">In the unit where you want to create the problem, click <strong>Problem</strong>
under <strong>Add New Component</strong>, and then click the <strong>Advanced</strong> tab.</p>
</li>
<li><p class="first">Click <strong>Custom JavaScript Display and Grading</strong>.</p>
</li>
<li><p class="first">In the component that appears, click <strong>Edit</strong>.</p>
</li>
<li><p class="first">In the component editor, modify the example code according to your problem.</p>
<ul>
<li><p class="first">All problems have more than one element. Most problems conform to the same-origin
policy (SOP), meaning that all elements have the same protocol, host, and port.
For example, <strong>http</strong>://<strong>store.company.com</strong>:<strong>81</strong>/subdirectory_1/JSInputElement.html and
<strong>http</strong>://<strong>store.company.com</strong>:<strong>81</strong>/subdirectory_2/JSInputElement.js have the same protocol
(http), host (store.company.com), and port (81).</p>
<p>If any elements of your problem use a different protocol, host, or port, you need to
bypass the SOP. For example, <strong>https</strong>://<strong>info.company.com</strong>/JSInputElement2.html
uses a different protocol, host, and port. To bypass the SOP, change
<strong>sop=&#8221;false&#8221;</strong> in line 8 of the example code to <strong>sop=&#8221;true&#8221;</strong>. For more information, see the same-origin policy
page on the <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Same_origin_policy_for_JavaScript">Mozilla Developer Network</a>
or on <a class="reference external" href="http://en.wikipedia.org/wiki/Same_origin_policy">Wikipedia</a>.</p>
</li>
</ul>
</li>
<li><p class="first">If you want your problem to have a <strong>Save</strong> button, click the <strong>Settings</strong> tab, and then set
<strong>Maximum Attempts</strong> to a number larger than zero.</p>
</li>
<li><p class="first">Click <strong>Save</strong>.</p>
</li>
</ol>
<div class="section" id="re-create-the-example-problem">
<h3>8.7.1.1. Re-create the Example Problem<a class="headerlink" href="#re-create-the-example-problem" title="Permalink to this headline">¶</a></h3>
<p>To re-create the example problem above, you&#8217;ll need the following files.</p>
<blockquote>
<div><ul class="simple">
<li>webGLDemo.html</li>
<li>webGLDemo.js</li>
<li>webGLDemo.css</li>
<li>three.min.js</li>
</ul>
</div></blockquote>
<p>To download these files in a .zip archive, go to <a class="reference external" href="http://files.edx.org/JSInput.zip">http://files.edx.org/JSInput.zip</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you need to bypass the SOP, you&#8217;ll also need the <strong>jschannel.js</strong> file, and your webGLDemo.html file will be slightly different. To download all these files in a .zip archive, go to <a class="reference external" href="http://files.edx.org/JSInput_BypassSOP.zip">http://files.edx.org/JSInput_BypassSOP.zip</a>.</p>
</div>
<ol class="arabic simple">
<li>Download and unpackage the files in either the JSInput.zip file or the JSInput_BypassSOP.zip file.</li>
<li>On the <strong>Files &amp; Uploads</strong> page, upload all the files from the .zip file.</li>
<li>Create a new custom JavaScript display and grading problem component.</li>
<li>On the <strong>Settings</strong> tab, set <strong>Maximum Attempts</strong> to a number larger than
zero.</li>
<li>In the problem component editor, replace the example code with the code below.</li>
<li>Click <strong>Save.</strong></li>
</ol>
</div>
<div class="section" id="javascript-input-problem-code">
<h3>8.7.1.2. JavaScript Input Problem Code<a class="headerlink" href="#javascript-input-problem-code" title="Permalink to this headline">¶</a></h3>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;problem</span> <span class="na">display_name=</span><span class="s">&quot;webGLDemo&quot;</span><span class="nt">&gt;</span>
In the image below, click the cone.

<span class="nt">&lt;script</span> <span class="na">type=</span><span class="s">&quot;loncapa/python&quot;</span><span class="nt">&gt;</span>
import json
def vglcfn(e, ans):
    &#39;&#39;&#39;
    par is a dictionary containing two keys, &quot;answer&quot; and &quot;state&quot;
    The value of answer is the JSON string returned by getGrade
    The value of state is the JSON string returned by getState
    &#39;&#39;&#39;
    par = json.loads(ans)
    # We can use either the value of the answer key to grade
    answer = json.loads(par[&quot;answer&quot;])
    return answer[&quot;cylinder&quot;]  and not answer[&quot;cube&quot;]
    # Or we can use the value of the state key
    &#39;&#39;&#39;
    state = json.loads(par[&quot;state&quot;])
    selectedObjects = state[&quot;selectedObjects&quot;]
    return selectedObjects[&quot;cylinder&quot;] and not selectedObjects[&quot;cube&quot;]
    &#39;&#39;&#39;
<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;customresponse</span> <span class="na">cfn=</span><span class="s">&quot;vglcfn&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;jsinput</span>
        <span class="na">gradefn=</span><span class="s">&quot;WebGLDemo.getGrade&quot;</span>
        <span class="na">get_statefn=</span><span class="s">&quot;WebGLDemo.getState&quot;</span>
        <span class="na">set_statefn=</span><span class="s">&quot;WebGLDemo.setState&quot;</span>
        <span class="na">width=</span><span class="s">&quot;400&quot;</span>
        <span class="na">height=</span><span class="s">&quot;400&quot;</span>
        <span class="na">html_file=</span><span class="s">&quot;/static/webGLDemo.html&quot;</span>
    <span class="nt">/&gt;</span>
<span class="nt">&lt;/customresponse&gt;</span>
<span class="nt">&lt;/problem&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When you create this problem, keep the following in mind.</p>
<ul class="last simple">
<li>The webGLDemo.js file defines the three JavaScript functions (<strong>WebGLDemo.getGrade</strong>, <strong>WebGLDemo.getState</strong>, and <strong>WebGLDemo.setState</strong>).</li>
<li>The JavaScript input problem code uses <strong>WebGLDemo.getGrade</strong>, <strong>WebGLDemo.getState</strong>, and <strong>WebGLDemo.setState</strong> to grade, save, or restore a problem. These functions must be global in scope.</li>
<li><strong>WebGLDemo.getState</strong> and <strong>WebGLDemo.setState</strong> are optional. You only have to define these functions if you want to conserve the state of the problem.</li>
<li><strong>Width</strong> and <strong>height</strong> represent the dimensions of the IFrame that holds the application.</li>
<li>When the problem opens, the cone and the cube are both blue, or &#8220;unselected.&#8221; When you click either shape once, the shape becomes yellow, or &#8220;selected.&#8221; To unselect the shape, click it again. Continue clicking the shape to select and unselect it.</li>
<li>The response is graded as correct if the cone is selected (yellow) when the user clicks <strong>Check</strong>.</li>
<li>Clicking <strong>Check</strong> or <strong>Save</strong> registers the problem&#8217;s current state.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="javascript-input-problem-xml">
<span id="js-input-problem-xml"></span><h2>8.7.2. JavaScript Input Problem XML<a class="headerlink" href="#javascript-input-problem-xml" title="Permalink to this headline">¶</a></h2>
<p>JSInput allows problem authors to turn stand-alone HTML files into problems that can be integrated into the edX platform. Since its aim is flexibility, it can be seen as the input and client-side equivalent of <strong>CustomResponse</strong>.</p>
<p>A JSInput exercise creates an IFrame in a static HTML page, and passes the return value of author-specified functions to the enclosing response type (generally <strong>CustomResponse</strong>). JSInput can also store and retrieve state.</p>
<div class="section" id="template">
<h3>8.7.2.1. Template<a class="headerlink" href="#template" title="Permalink to this headline">¶</a></h3>
<p>The following is the basic format of a JSInput problem:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;problem&gt;</span>
       <span class="nt">&lt;script</span> <span class="na">type=</span><span class="s">&quot;loncapa/python&quot;</span><span class="nt">&gt;</span>
def all_true(exp, ans): return ans == &quot;hi&quot;
       <span class="nt">&lt;/script&gt;</span>
       <span class="nt">&lt;customresponse</span> <span class="na">cfn=</span><span class="s">&quot;all_true&quot;</span><span class="nt">&gt;</span>
           <span class="nt">&lt;jsinput</span> <span class="na">gradefn=</span><span class="s">&quot;gradefn&quot;</span>
               <span class="na">height=</span><span class="s">&quot;500&quot;</span>
               <span class="na">get_statefn=</span><span class="s">&quot;getstate&quot;</span>
               <span class="na">set_statefn=</span><span class="s">&quot;setstate&quot;</span>
               <span class="na">html_file=</span><span class="s">&quot;/static/jsinput.html&quot;</span><span class="nt">/&gt;</span>
       <span class="nt">&lt;/customresponse&gt;</span>
<span class="nt">&lt;/problem&gt;</span>
</pre></div>
</div>
<p>The accepted attributes are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="30%" />
<col width="19%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute Name</th>
<th class="head">Value Type</th>
<th class="head">Required</th>
<th class="head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>html_file</td>
<td>URL string</td>
<td>Yes</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>gradefn</td>
<td>Function name</td>
<td>Yes</td>
<td><cite>gradefn</cite></td>
</tr>
<tr class="row-even"><td>set_statefn</td>
<td>Function name</td>
<td>No</td>
<td>None</td>
</tr>
<tr class="row-odd"><td>get_statefn</td>
<td>Function name</td>
<td>No</td>
<td>None</td>
</tr>
<tr class="row-even"><td>height</td>
<td>Integer</td>
<td>No</td>
<td><cite>500</cite></td>
</tr>
<tr class="row-odd"><td>width</td>
<td>Integer</td>
<td>No</td>
<td><cite>400</cite></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="required-attributes">
<h3>8.7.2.2. Required Attributes<a class="headerlink" href="#required-attributes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><strong>html_file</strong></p>
<p>The <strong>html_file</strong> attribute specifies the HTML file that the IFrame will point to. The HTML file
must be located in the content directory.</p>
<p>The IFrame is created using the sandbox attribute. Although pop-ups, scripts, and pointer locks are allowed, the IFrame cannot access its parent&#8217;s attributes.</p>
<p>The HTML file must contain a <strong>gradefn</strong> function that the JSInput file can access. To determine whether the <strong>gradefn</strong> function is accessible, in the console, make sure that <strong>gradefn</strong> returns the right thing. When JSInput uses the <strong>gradefn</strong> function, <cite>gradefn</cite> is called with <cite>gradefn</cite>.call(<cite>obj</cite>), where <strong>obj</strong> is the object-part of <strong>gradefn</strong>. For example, if <strong>gradefn</strong> is <strong>myprog.myfn</strong>, JSInput calls <strong>myprog.myfun.call(myprog)</strong>. (This is to ensure &#8220;<cite>this</cite>&#8221; continues to refer to what <cite>gradefn</cite> expects.)</p>
<p>Aside from that, more or less anything goes. Note that currently there is no support for inheriting CSS or JavaScript from the parent (aside from the Chrome-only <strong>seamless</strong> attribute, which is set to True by default).</p>
</li>
<li><p class="first"><strong>gradefn</strong></p>
<p>The <strong>gradefn</strong> attribute specifies the name of the function that will be called when a user clicks <strong>Check</strong>, and that returns the student&#8217;s answer. Unless both the <strong>get_statefn</strong> and <strong>set_statefn</strong> attributes are also used, this answer is passed as a string to the enclosing response type. In the <strong>customresponse</strong> example above, this means <strong>cfn</strong> will be passed this answer as <tt class="docutils literal"><span class="pre">ans</span></tt>.</p>
<p>If the <strong>gradefn</strong> function throws an exception when a student attempts to submit a problem, the submission is aborted, and the student receives a generic alert. The alert can be customised by making the exception name <tt class="docutils literal"><span class="pre">Waitfor</span> <span class="pre">Exception</span></tt>; in that case, the alert message will be the exception message.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">To make sure the student&#8217;s latest answer is passed correctly, make sure that the <strong>gradefn</strong> function is not asynchronous. Additionally, make sure that the function returns promptly. Currently the student has no indication that her answer is being calculated or produced.</p>
</div>
</li>
</ul>
</div>
<div class="section" id="optional-attributes">
<h3>8.7.2.3. Optional Attributes<a class="headerlink" href="#optional-attributes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><strong>set_statefn</strong></p>
<p>Sometimes a problem author will want information about a student&#8217;s previous answers (&#8220;state&#8221;) to be saved and reloaded. If the attribute <strong>set_statefn</strong> is used, the function given as its value will be passed the state as a string argument whenever there is a state, and the student returns to a problem. The function has the responsibility to then use this state approriately.</p>
<p>The state that is passed is:</p>
<ul class="simple">
<li>The previous output of <strong>gradefn</strong> (i.e., the previous answer) if <strong>get_statefn</strong> is not defined.</li>
<li>The previous output of <strong>get_statefn</strong> (see below) otherwise.</li>
</ul>
<p>It is the responsibility of the iframe to do proper verification of the argument that it receives via <strong>set_statefn</strong>.</p>
</li>
<li><p class="first"><strong>get_statefn</strong></p>
<p>Sometimes the state and the answer are quite different. For instance, a problem that involves using a javascript program that allows the student to alter a molecule may grade based on the molecule&#8217;s hydrophobicity, but from the hydrophobicity it might be incapable of restoring the state. In that case, a
<em>separate</em> state may be stored and loaded by <strong>set_statefn</strong>. Note that if <strong>get_statefn</strong> is defined, the answer (i.e., what is passed to the enclosing response type) will be a json string with the following format:</p>
<div class="highlight-xml"><div class="highlight"><pre>{
    answer: `[answer string]`
    state: `[state string]`
}
</pre></div>
</div>
<p>The enclosing response type must then parse this as json.</p>
</li>
<li><p class="first"><strong>height</strong> and <strong>width</strong></p>
<p>The <strong>height</strong> and <strong>width</strong> attributes are straightforward: they specify the height and width of the IFrame. Both are limited by the enclosing DOM elements, so for instance there is an implicit max-width of around 900.</p>
<p>In the future, JSInput may attempt to make these dimensions match the HTML file&#8217;s dimensions (up to the aforementioned limits), but currently it defaults to <cite>500</cite> and <cite>400</cite> for <strong>height</strong> and <strong>width</strong>, respectively.</p>
</li>
</ul>
</div>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="drag_and_drop.html" class="btn btn-neutral float-right" title="8.8. Drag and Drop Problem"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="conditional_module.html" class="btn btn-neutral" title="8.6. Conditional Module"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2014, edX.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>